local init_time = 90 -- round time in seconds

Maps = {
	["WJ"] = {324428,4192147,6119641,6119642,6119643,6119655,6120650,6133176,6146352,6274154,6641061,6641085,7465241,7485501,6799629,6755943,7627933,7628267,7628262,7628264,7628265,7627928,7627934,7627939,7600732,7601742,7601755,7627935,7601758,7608215,7608225,7608227,7628299,7627953,7627955,7627957,7574934,7630264,7630265,7630266,7630269},
	["Burlas"] = {7741281,7686258,7686256,7686255,7686253,7686251,7686250,7686248,7686247,7686246,7686245,7686242,7686241,7686234,7686233,7686231,7686230,7686229,7682367,7682365,7682362,7682361,7682358,7682356,7682354,7682351,7680982,7680981,7680978,7679563,7679561,7679560,7679558,7679556,7679087,7679084,7679079,7679078,7679074,7679070,7678148,7677803,7677802,7677801,7677799,7677798,7677797,7677796,7677795,7677794,7677793,7677791,7677790,7677787,7677785,7677782,7676869,7676867,7676862,7676856,7676859,7675766,7675499,7675498,7675496,7675491,7675489,7664114,7664113,7664112,7664111,7664110,7664107,7664106,7664103,7664105,7664102,7661197,7661195,7661194,7661191,7661039,7661038,7661037,7661035,7661031,7661029,7661028,7661026,7661024,7661022,7661019,7661018,7661017,7661015,7661013,7661012,7661011,7661009,7661008,7661005,7660877,7660876,7660875,7660874,7660873,7660871,7660869,7660868,7660866,7660865,7660864,7660863,7660725,7660648,7660647,7660644,7660641,7660640,7660638,7660637,7660636,7660635,7660633,7660632,7660631,7660628,7660627,7660626,7660624,7660623,7660622,7660621,7660619,7660617,7660616,7660428,7660613,7660612,7660436,7660434,7660433,7660430,7660425,7660424,7660421,7660420,7660419,7660417,7660416,7660321,7660320,7660319,7660316,7660314,7660312,7660311,7660308,7660307,7660305,7660301,7660300,7660297,7660295,7660290,7660289,7660287,7660283,7660285,7660282,7660278,7660276,7660270,7660272,7660268,7660167,7660164,7660160,7660398,7660155,7660400,7660401,7660149,7660148,7660146,7660144,7660138,7660132,7659998,7659995,7659994,7659993,7659992,7659991,7659987,7659983,7659980,7659978,7659917,7659921,7659923,7659927,7659933,7659934,7659935,7659937,7659938,7659939,7659941,7659945,7659949,7659951,7659955,7659957,7659958,7659964,7659914,7659681,7659678,7659677,7659742,7659744,7659757,7659747,7659748,7659749,7659751,7659752,7659760,7659762,7659765,7659766,7659768,7659772,7659773,7659774,7659775,7630519,7630522,7630524,7630528,7630532,7630537,7630542,7630545,7630560,7630564,7630565,7630567,7630571,7630588,7630591,7630593,7630595,7630596,7630607,7630612,7630634,7630646,7630648,7630650,7630657,7630662,7630664,7630668,7630669,7630670,7630673,7630675,7630677,7635526,7635528,7635533,7635534,7635535,7635536,7635537,7635538,7635539,7635540,7635541,7635542,7635544,7635545,7635546,7635547,7635549,7635550,7635551,7635552,7635553,7635555,7635556,7635560,7664101,7635563,7635566,7635567,7635568,7635570},
	["Vanilla"] = {},
	["Bootcamp"] = {'#13', '#3'},
	["Defilante"] = {'#18'},
	["Random"] = {},
	["Racing"] = {'#17'},
	["Custom1"] = {},
	["Custom2"] = {},
	["Custom3"] = {},
	["Custom4"] = {},
	["Custom5"] = {},
}


-- main code dont touch or bad
local a,b,c,pcall,d,e,f,g,h,i,j,k,tonumber,tostring,ipairs,l,m,o,p,q,r,print=math.floor,math.random,os.time,pcall,string.format,string.match,string.split,string.sub,system.bindMouse,system.disableChatCommandDisplay,table.concat,table.foreach,tonumber,tostring,ipairs,table.remove,ui.addTextArea,ui.removeTextArea,ui.setMapName,ui.showColorPicker,ui.updateTextArea,print;local s=20;tfm.exec.disableAutoScore()tfm.exec.disableAfkDeath()tfm.exec.disableDebugCommand()tfm.exec.disablePhysicalConsumables()tfm.exec.disableAutoShaman()tfm.exec.disableAutoNewGame()tfm.exec.disableAutoTimeLeft()local t="none"local u;do local v,w=pcall(nil)u=e(w,"(.-)%.")end;local x={}local y={}local z={}local A={}local B={}local C={}local D=false;local E=false;local F=false;local G;local H=false;local I=false;local J=false;local K=false;local L=[[<C><P /><Z><S><S P="0,0,0.3,0.2,0,0,0,0" X="397" L="3000" o="0" H="3000" c="4" Y="195" T="12" /><S P="0,0,0.3,0.2,0,0,0,0" L="800" o="0" X="400" H="29" Y="386" T="12" /><S P="0,0,0.3,0.2,-90,0,0,0" L="800" o="0" X="16" H="29" Y="-3" T="12" /><S P="0,0,0.3,0.2,-180,0,0,0" L="800" o="0" X="399" H="29" Y="0" T="12" /><S P="0,0,0.3,0.2,-270,0,0,0" L="800" o="0" X="786" H="29" Y="1" T="12" /></S><D><DS Y="362" X="70" /></D><O /></Z></C>]]local M={alive=0,total=0}function M:cAlive()self.alive=0;for N,O in next,tfm.get.room.playerList do if not O.isDead and contains(x,N,'index')then self.alive=self.alive+1 end end end;function M:cTotal()self.total=0;for N,O in next,tfm.get.room.playerList do self.total=self.total+1 end end;local P={time=init_time,counter=0}local Q=0;Teams={[1]={},[2]={},[3]={},[4]={},[5]={},[6]={},[7]={},[8]={}}points={[1]=0,[2]=0,[3]=0,[4]=0,[5]=0,[6]=0,[7]=0,[8]=0}colors={[1]='bf19a9',[2]='F4EA0E',[3]='FFE0AF',[4]='AFFFFD',[5]='CD3D09',[6]='39D358',[7]='F33A76',[8]='2A51EC'}rainbowColors={"EB0C0C","EB790C","EBE70C","0DEB0C","0CC2EB","214AED","B221ED"}i()function secondsToClock(R)local S=tonumber(R)local T=a(S/60)local U=S%60;if U<10 then U="0"..tostring(U)end;return T..":"..U end;function contains(V,W,X)X=X or'value'if X=='value'then for N,O in next,V do if O==W then return true end end elseif X=='index'then for N,O in next,V do if N==W then return true end end end end;function index(V,W)for N,O in next,V do if O==W then return N end end end;function set()local Y={}for v,Z in ipairs({})do Y[Z]=true end;return Y end;function f(_,a0)local a0,a1=a0 or',',{lay}for a2 in _:gmatch('[^'..a0 ..']+')do a1[#a1+1]=a2 end;return a1 end;team_index=1;function CreateTeams()if t=="2teams"then for w in next,tfm.get.room.playerList do if not x[w]then Teams[team_index][#Teams[team_index]+1]=w;if team_index==2 then team_index=0 end;team_index=team_index+1;x[w]=true end end end;if t=="4teams"then for w in next,tfm.get.room.playerList do if not x[w]then Teams[team_index][#Teams[team_index]+1]=w;if team_index==4 then team_index=0 end;team_index=team_index+1;x[w]=true end end end;if t=="8teams"then for w in next,tfm.get.room.playerList do if not x[w]then Teams[team_index][#Teams[team_index]+1]=w;if team_index==8 then team_index=0 end;team_index=team_index+1;x[w]=true end end end;SetNameColors()end;function SetNameColors()for a3 in next,tfm.get.room.playerList do for N=1,#Teams do if contains(Teams[N],a3)then tfm.exec.setNameColor(a3,"0x"..colors[N])end end end end;function TeamDisplay()for N=1,tonumber(g(t,1,1))do if#Teams[N]>=1 then r(N-1,"<p align='center'><font size='14' color='#E6E6E6'><u>Team "..N.."</u></font>\n<font color='#E6E6E6'>━━━━━━━━━━━━━━━━━━</font>\n<font color='#"..colors[N].."'>"..j(Teams[N],"\n").."</font></p>",nil)else r(N-1,"<p align='center'><font size='14' color='#E6E6E6'><u>Team "..N.."</u></font>\n<font color='#E6E6E6'>━━━━━━━━━━━━━━━━━━</font>\n<font color='#E6E6E6'>No players :(</font></p>",nil)end end end;local a4,currentMap,a5=...,currentMap or"Hub",...function newMap()if not D then if#z<1 then for N,O in next,C do if O==currentMap then a4=O;l(C,N)break end end;a5=C[b(#C)]if a4 then C[#C+1]=a4 end elseif#z>0 then a5=z[1]l(z,1)end;tfm.exec.newGame(a5)end end;function newGame()for N=1,#Teams do points[N]=0;Teams[N]={}end;x={}winnersTeam=nil;t="none"m(-420,"<a href='event:2teams'><p align='center'><font size='16' color='#E6E6E6'>2 Teams</font></p></a>",u,340,240,100,0,0x000001,0x000001,0.55,true)m(-421,"<a href='event:4teams'><p align='center'><font size='16' color='#E6E6E6'>4 Teams</font></p></a>",u,340,200,100,0,0x000001,0x000001,0.55,true)m(-422,"<a href='event:8teams'><p align='center'><font size='16' color='#E6E6E6'>8 Teams</font></p></a>",u,340,160,100,0,0x000001,0x000001,0.55,true)end;function playerCheck()for N,O in next,tfm.get.room.playerList do if not x[N]then tfm.exec.killPlayer(N)end;if I then if g(N,1,1)=="*"then tfm.exec.killPlayer(N)end end end end;function displayScore(w)if t=="2teams"then if B[w].ui.scoreToggled then m(-912841,d("<font size='18' face='Consolas'><font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>/</N></b> <VI><b>%s</b></VI></font>",colors[1],points[1],colors[2],points[2],s),nil,350,20,0,0,0x000001,0x000001,0.1,true)else o(-912841,w)end end;if t=="4teams"then if B[w].ui.scoreToggled then m(-912841,d("<font size='18' face='Consolas'><font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>/</N></b> <VI><b>%s</b></VI></font>",colors[1],points[1],colors[2],points[2],colors[3],points[3],colors[4],points[4],s),nil,310,20,0,0,0x000001,0x000001,0.1,true)else o(-912841,w)end end;if t=="8teams"then if B[w].ui.scoreToggled then m(-912841,d("<font size='18' face='Consolas'><font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font size='18'><font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>x</N></b> <font color='#%s'><b>%s</b></font> <b><N>/</N></b> <VI><b>%s</b></VI></font>",colors[1],points[1],colors[2],points[2],colors[3],points[3],colors[4],points[4],colors[5],points[5],colors[6],points[6],colors[7],points[7],colors[8],points[8],s),w,240,20,0,0,0x000001,0x000001,0.1,true)else o(-912841,w)end end end;function game_modes()m(-1111,"<a href='event:wj'><p align='center'><font size='16' color='#E6E6E6'>WJ</font></p></a>",u,230,200,100,0,0x000001,0x000001,0.55,true)m(-1112,"<a href='event:burlas'><p align='center'><font size='16' color='#E6E6E6'>Burlas</font></p></a>",u,350,200,100,0,0x000001,0x000001,0.55,true)m(-1113,"<a href='event:random'><p align='center'><font size='16' color='#E6E6E6'>Random</font></p></a>",u,470,200,100,0,0x000001,0x000001,0.55,true)m(-1114,"<a href='event:vanilla'><p align='center'><font size='16' color='#E6E6E6'>Vanilla</font></p></a>",u,230,160,100,0,0x000001,0x000001,0.55,true)m(-1115,"<a href='event:bootcamp'><p align='center'><font size='16' color='#E6E6E6'>Bootcamp</font></p></a>",u,350,160,100,0,0x000001,0x000001,0.55,true)m(-1116,"<a href='event:defilante'><p align='center'><font size='16' color='#E6E6E6'>Defilante</font></p></a>",u,470,160,100,0,0x000001,0x000001,0.55,true)m(-1117,"<a href='event:racing'><p align='center'><font size='16' color='#E6E6E6'>Racing</font></p></a>",u,230,120,100,0,0x000001,0x000001,0.55,true)m(-1118,"<a href='event:custom1'><p align='center'><font size='16' color='#E6E6E6'>Custom 1</font></p></a>",u,350,120,100,0,0x000001,0x000001,0.55,true)m(-1119,"<a href='event:custom2'><p align='center'><font size='16' color='#E6E6E6'>Custom 2</font></p></a>",u,470,120,100,0,0x000001,0x000001,0.55,true)m(-1120,"<a href='event:custom3'><p align='center'><font size='16' color='#E6E6E6'>Custom 3</font></p></a>",u,230,80,100,0,0x000001,0x000001,0.55,true)m(-1121,"<a href='event:custom4'><p align='center'><font size='16' color='#E6E6E6'>Custom 4</font></p></a>",u,350,80,100,0,0x000001,0x000001,0.55,true)m(-1122,"<a href='event:custom5'><p align='center'><font size='16' color='#E6E6E6'>Custom 5</font></p></a>",u,470,80,100,0,0x000001,0x000001,0.55,true)end;function settings()for N=-1111,-1122,-1 do o(N)end;if not I then m(-2222,"<a href='event:setting1'><p align='center'><font size='16' color='#E6E6E6'>Anti Souris: <R>OFF</R></font></p></a>",u,230,80,150,0,0x000001,0x000001,0.55,true)else m(-2222,"<a href='event:setting1_1'><p align='center'><font size='16' color='#E6E6E6'>Anti Souris: <VP>ON</VP></font></p></a>",u,230,80,150,0,0x000001,0x000001,0.55,true)end;if not J then m(-2223,"<a href='event:setting2'><p align='center'><font size='16' color='#E6E6E6'>Turbo Mode: <R>OFF</R></font></p></a>",u,230,120,150,0,0x000001,0x000001,0.55,true)else m(-2223,"<a href='event:setting2_1'><p align='center'><font size='16' color='#E6E6E6'>Turbo Mode: <VP>ON</VP></font></p></a>",u,230,120,150,0,0x000001,0x000001,0.55,true)end;if not H then m(-2224,"<a href='event:setting3'><p align='center'><font size='16' color='#E6E6E6'>Auto Join: <R>OFF</R></font></p></a>",u,230,160,150,0,0x000001,0x000001,0.55,true)else m(-2224,"<a href='event:setting3_1'><p align='center'><font size='16' color='#E6E6E6'>Auto Join: <VP>ON</VP></font></p></a>",u,230,160,150,0,0x000001,0x000001,0.55,true)end end;function gamehelper()m(-478172,"<font size='16' color='#E6E6E6'><a href='event:ghSkip'>S</a></font>",u,-46,7,0,0,0x000001,0x000001,0.55,true)m(-478173,"<font size='16' color='#E6E6E6'><a href='event:ghRepeat'>R</a></font>",u,-21,7,0,0,0x000001,0x000001,0.55,true)end;function drawParticles_strike(R,a6)for N=1,400,20 do tfm.exec.displayParticle(35,R,N+a6-400)tfm.exec.displayParticle(36,R,N+a6-400)tfm.exec.displayParticle(37,R,N+a6-400)tfm.exec.displayParticle(2,R,N+a6-400)end;for N=1,10 do tfm.exec.displayParticle(3,R,a6,b(-10,10)/10,b(-10,10)/10,b(-10,10)/100,b(-10,10)/100)tfm.exec.displayParticle(3,R+(N-5)*5,a6,b(-10,10),nil,b(-10,10)/10,nil)end end;function createJail()tfm.exec.addPhysicObject(2,-230,329,{type=12,restitution=0.2,friction=0.3,width=90,height=15,groundCollision=true,color='0x757E9F'})tfm.exec.addPhysicObject(3,-230,390,{type=12,restitution=0.2,friction=0.3,width=90,height=15,groundCollision=true,color='0x757E9F'})tfm.exec.addPhysicObject(4,-180,360,{type=12,restitution=0.2,friction=0.3,width=15,height=76,groundCollision=true,color='0x757E9F'})tfm.exec.addPhysicObject(5,-280,360,{type=12,restitution=0.2,friction=0.3,width=15,height=76,groundCollision=true,color='0x757E9F'})end;function eventNewGame()currentMap=tfm.get.room.xmlMapInfo.mapCode;P.time=init_time;P.counter=0;local a7=secondsToClock(P.time)p('<CH><b>@'..currentMap..'</b></CH> <G>|</G> <FC>Racing Teams <VP><b>BETA </b></VP></FC><G>|</G> Time Left<N>:</N> <N><b>'..a7 ..'</b></N>\t\tMice<N>:</N> <N><b>'..M.total..'</b></N> (<N><b>'..M.alive..'</b></N> on map)\t\t\t\t\t\t\t\t\t\t\t\t\t')E=false;if F then playerCheck()end;for N,O in next,tfm.get.room.playerList do displayScore(N)end;SetNameColors()local a8=false;for N,O in next,B do if O.attr.jailTime>0 then a8=true end end;if a8 then createJail()for N,O in next,B do if O.attr.jailTime>0 then tfm.exec.movePlayer(N,-200,365)O.attr.jailTime=O.attr.jailTime-1 end end end;for Z,O in next,B do if O.sixLoop then if#O.images>0 then tfm.exec.removeImage(O.images[1])end;O.images[1]=tfm.exec.addImage("1731a5e4831.png","$"..Z,-15,-60,nil)end end end;function eventPlayerLeft()M:cTotal()M:cAlive()end;function eventNewPlayer(w)if H and F and not x[w]and not y[w]then local T=1;for N=2,tonumber(g(t,1,1))do if#Teams[N]<#Teams[T]then T=N end end;Teams[T][#Teams[T]+1]=w;x[w]=true end;if not contains(x,w)then B[w]={pointsScored=0,attr={hasTfm=false,hasConj=false,jailTime=0},ui={scoreToggled=true},images={}}end;M:cTotal()M:cAlive()displayScore(w)local a7=secondsToClock(P.time)p('<CH><b>@'..currentMap..'</b></CH> <G>|</G> <FC>Racing Teams <VP><b>BETA </b></VP></FC><G>|</G> Time Left<N>:</N> <N><b>'..a7 ..'</b></N>\t\tMice<N>:</N> <N><b>'..M.total..'</b></N> (<N><b>'..M.alive..'</b></N> on map)\t\t\t\t\t\t\t\t\t\t\t\t\t')end;k(tfm.get.room.playerList,eventNewPlayer)function eventLoop(a9,aa)local ab=P;if disappearTime_2 and disappearTime_2+5000<c()then o(892881)disappearTime_2=nil end;if#A>=1 then for N,O in next,A do tfm.exec.setNameColor(O,"0x"..rainbowColors[b(#rainbowColors)])end end;if not D and F then ab.counter=ab.counter+1;if ab.counter==2 then Q=Q+1;ab.time=ab.time-1;local a7=secondsToClock(ab.time)M:cAlive()M:cTotal()p('<CH><b>@'..currentMap..'</b></CH> <G>|</G> <FC>Racing Teams <VP><b>BETA </b></VP></FC><G>|</G> Time Left<N>:</N> <N><b>'..a7 ..'</b></N>\t\tMice<N>:</N> <N><b>'..M.total..'</b></N> (<N><b>'..M.alive..'</b></N> on map)\t\t\t\t\t\t\t\t\t\t\t\t\t')ab.counter=0 end;if ab.time<=0 then newMap()end end;for Z,O in next,B do if O.sixLoop then if#O.images>0 then tfm.exec.removeImage(O.images[1])end;O.images[1]=tfm.exec.addImage("1731a5e4831.png","$"..Z,-15,-60,nil)end end end;function eventPlayerDied(a3)local R=0;for N,O in next,tfm.get.room.playerList do if not O.isDead then R=R+1 end end;if R>0 then return else if not F then return end;newMap()end end;function eventPlayerWon(a3)if not E and not D and F then tfm.exec.setPlayerScore(a3,1,true)E=true;B[a3].pointsScored=B[a3].pointsScored+1;for N=1,tonumber(g(t,1,1))do if contains(Teams[N],a3)then points[N]=points[N]+1;if points[N]>=s then winnersTeam=N end;break end end;if winnersTeam then F=false;o(-478172)o(-478173)tfm.exec.newGame(L)local ac;local ad=-1;for N,O in next,B do if contains(Teams[winnersTeam],N)and ad<O.pointsScored then ad=O.pointsScored;ac=N end end;for n,O in next,B do local ae;local af;for N=1,tonumber(g(t,1,1))do if contains(Teams[N],n)then ae=N;af=colors[N]break else ae="Did not participate"af='eff1f2'end end;m(8,d("<p align='center'><font size='20' face='Consolas'><font color='#eff1f2'>Team <font color='#"..colors[winnersTeam].."'>"..winnersTeam.."</font> won\n<font size='10'><N>Session time: "..secondsToClock(Q).."</N></font>\n\n<font size='16'><p align='left'><O>MVP</O>: "..ac.." | <O>"..ad.."</O> points\n<VP>Last point</VP>: %s\n\n\n\nYour points: <T>"..O.pointsScored.."</T> (Team <font color='#"..af.."'>"..ae.."</font>)</p></font></font></font>",a3),n,200,80,400,200,0x000000,0x000000,0.55,true)end end;for N,O in next,tfm.get.room.playerList do displayScore(N)end;if J then newMap()else P.counter=0;P.time=4;local a7=secondsToClock(P.time)p('<CH><b>@'..currentMap..'</b></CH> <G>|</G> <FC>Racing Teams <VP><b>BETA </b></VP></FC><G>|</G> Time Left<N>:</N> <N><b>'..a7 ..'</b></N>\t\tMice<N>:</N> <N><b>'..M.total..'</b></N> (<N><b>'..M.alive..'</b></N> on map)\t\t\t\t\t\t\t\t\t\t\t\t\t')end end end;function eventTextAreaCallback(ag,w,ah)if ah=="2teams"then teams_count=2;t="2teams"m(0,"",nil,5,30,202,278,0x000001,"0x"..colors[1],0.55,true)m(1,"",nil,592,30,202,278,0x000001,"0x"..colors[2],0.55,true)m(-45,"<a href='event:map'><p align='center'><font size='16' color='#E6E6E6'>Mode</font></p></a>",u,350,240,100,0,0x000001,0x000001,0.55,true)m(-43,"<a href='event:fill'><p align='center'><font size='16' color='#E6E6E6'>Fill</font></p></a>",u,350,320,100,0,0x000001,0x000001,0.55,true)m(-47,"<a href='event:clear'><p align='center'><font size='16' color='#E6E6E6'>Clear</font></p></a>",u,350,360,100,0,0x000001,0x000001,0.55,true)m(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: None</font></p>",nil,230,40,340,0,0x000001,0x000001,0.55,true)m(-48,"<a href='event:settings_on'><p align='center'><font size='16' color='#E6E6E6'>Settings</font></p></a>",u,230,360,100,0,0x000001,0x000001,0.55,true)o(-420)o(-421)o(-422)CreateTeams()TeamDisplay()SetNameColors()end;if ah=="4teams"then teams_count=4;t="4teams"m(0,"",nil,-250,30,202,278,0x000001,"0x"..colors[1],0.55,true)m(1,"",nil,5,30,202,278,0x000001,"0x"..colors[2],0.55,true)m(2,"",nil,592,30,202,278,0x000001,"0x"..colors[3],0.55,true)m(3,"",nil,850,30,202,278,0x000001,"0x"..colors[4],0.55,true)m(-45,"<a href='event:map'><p align='center'><font size='16' color='#E6E6E6'>Mode</font></p></a>",u,350,240,100,0,0x000001,0x000001,0.55,true)m(-43,"<a href='event:fill'><p align='center'><font size='16' color='#E6E6E6'>Fill</font></p></a>",u,350,320,100,0,0x000001,0x000001,0.55,true)m(-47,"<a href='event:clear'><p align='center'><font size='16' color='#E6E6E6'>Clear</font></p></a>",u,350,360,100,0,0x000001,0x000001,0.55,true)m(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: None</font></p>",nil,230,40,340,0,0x000001,0x000001,0.55,true)m(-48,"<a href='event:settings_on'><p align='center'><font size='16' color='#E6E6E6'>Settings</font></p></a>",u,230,360,100,0,0x000001,0x000001,0.55,true)o(-420)o(-421)o(-422)CreateTeams()TeamDisplay()SetNameColors()end;if ah=="8teams"then teams_count=8;t="8teams"m(0,"",nil,-250,30,202,139,0x000001,"0x"..colors[1],0.55,true)m(1,"",nil,5,30,202,139,0x000001,"0x"..colors[2],0.55,true)m(2,"",nil,592,30,202,139,0x000001,"0x"..colors[3],0.55,true)m(3,"",nil,850,30,202,139,0x000001,"0x"..colors[4],0.55,true)m(4,"",nil,-250,232,202,139,0x000001,"0x"..colors[5],0.55,true)m(5,"",nil,5,232,202,139,0x000001,"0x"..colors[6],0.55,true)m(6,"",nil,592,232,202,139,0x000001,"0x"..colors[7],0.55,true)m(7,"",nil,850,232,202,139,0x000001,"0x"..colors[8],0.55,true)m(-45,"<a href='event:map'><p align='center'><font size='16' color='#E6E6E6'>Mode</font></p></a>",u,350,240,100,0,0x000001,0x000001,0.55,true)m(-43,"<a href='event:fill'><p align='center'><font size='16' color='#E6E6E6'>Fill</font></p></a>",u,350,320,100,0,0x000001,0x000001,0.55,true)m(-47,"<a href='event:clear'><p align='center'><font size='16' color='#E6E6E6'>Clear</font></p></a>",u,350,360,100,0,0x000001,0x000001,0.55,true)m(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: None</font></p>",nil,230,30,340,0,0x000001,0x000001,0.55,true)m(-48,"<a href='event:settings_on'><p align='center'><font size='16' color='#E6E6E6'>Settings</font></p></a>",u,230,360,100,0,0x000001,0x000001,0.55,true)o(-420)o(-421)o(-422)CreateTeams()TeamDisplay()SetNameColors()end;if ah=="fill"then CreateTeams()TeamDisplay()end;if ah=="clear"then team_index=1;for N=1,tonumber(g(t,1,1))do for R=1,#Teams[N]do x[Teams[N][1]]=false;l(Teams[N],1)end end;TeamDisplay()end;if ah=="map"then r(-45,"<a href='event:closemap'><p align='center'><font size='16' color='#E6E6E6'>Mode</font></p></a>",u)for N=-2222,-2224,-1 do o(N)end;game_modes()elseif ah=="closemap"then for N=-1111,-1122,-1 do o(N)end;r(-45,"<a href='event:map'><p align='center'><font size='16' color='#E6E6E6'>Mode</font></p></a>",u)end;if ah=="settings_on"then settings()r(-45,"<a href='event:map'><p align='center'><font size='16' color='#E6E6E6'>Mode</font></p></a>",u)r(-48,"<a href='event:settings_off'><p align='center'><font size='16' color='#E6E6E6'>Settings</font></p></a>",u)elseif ah=="settings_off"then for N=-2222,-2225,-1 do o(N)end;r(-48,"<a href='event:settings_on'><p align='center'><font size='16' color='#E6E6E6'>Settings</font></p></a>",u)end;if ah=="setting1"then I=true;r(-2222,"<a href='event:setting1_1'><p align='center'><font size='16' color='#E6E6E6'>Anti Souris: <VP>ON</VP></font></p></a>",u)end;if ah=="setting1_1"then I=false;r(-2222,"<a href='event:setting1'><p align='center'><font size='16' color='#E6E6E6'>Anti Souris: <R>OFF</R></font></p></a>",u)end;if ah=="setting2"then J=true;r(-2223,"<a href='event:setting2_1'><p align='center'><font size='16' color='#E6E6E6'>Turbo Mode: <VP>ON</VP></font></p></a>",u)end;if ah=="setting2_1"then J=false;r(-2223,"<a href='event:setting2'><p align='center'><font size='16' color='#E6E6E6'>Turbo Mode: <R>OFF</R></font></p></a>",u)end;if ah=="setting3"then H=true;r(-2224,"<a href='event:setting3_1'><p align='center'><font size='16' color='#E6E6E6'>Auto Join: <VP>ON</VP></font></p></a>",u)end;if ah=="setting3_1"then H=false;r(-2224,"<a href='event:setting3'><p align='center'><font size='16' color='#E6E6E6'>Auto Join: <R>OFF</R></font></p></a>",u)end;if ah=="wj"and#Maps["WJ"]>0 then C=Maps["WJ"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: WJ</font></p>",nil)elseif ah=="burlas"and#Maps["Burlas"]>0 then C=Maps["Burlas"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Burlas</font></p>",nil)elseif ah=="random"and#Maps["Random"]>0 then C=Maps["Random"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Random</font></p>",nil)elseif ah=="vanilla"and#Maps["Vanilla"]>0 then C=Maps["Vanilla"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Vanilla</font></p>",nil)elseif ah=="bootcamp"and#Maps["Bootcamp"]>0 then C=Maps["Bootcamp"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Bootcamp</font></p>",nil)elseif ah=="defilante"and#Maps["Defilante"]>0 then C=Maps["Defilante"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Defilante</font></p>",nil)elseif ah=="racing"and#Maps["Racing"]>0 then C=Maps["Racing"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Racing</font></p>",nil)elseif ah=="custom1"and#Maps["Custom1"]>0 then C=Maps["Custom1"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Custom 1</font></p>",nil)elseif ah=="custom2"and#Maps["Custom2"]>0 then C=Maps["Custom2"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Custom 2</font></p>",nil)elseif ah=="custom3"and#Maps["Custom3"]>0 then C=Maps["Custom3"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Custom 3</font></p>",nil)elseif ah=="custom4"and#Maps["Custom4"]>0 then C=Maps["Custom4"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Custom 4</font></p>",nil)elseif ah=="custom5"and#Maps["Custom5"]>0 then C=Maps["Custom5"]m(-44,"<a href='event:play'><p align='center'><font size='16' color='#E6E6E6'>Play</font></p></a>",u,350,280,100,0,0x000001,0x000001,0.55,true)r(-1123,"<p align='center'><font size='16' color='#E6E6E6'>Current mode: Custom 5</font></p>",nil)end;if ah=="play"then for N=-48,7 do o(N)end;for N=-2222,-2225,-1 do o(N)end;for N=-1111,-1123,-1 do o(N)end;tfm.exec.disableAutoNewGame(true)F=true;if H then k(tfm.get.room.playerList,eventNewPlayer)end;for N,O in next,tfm.get.room.playerList do displayScore(N)end;for N,O in next,tfm.get.room.playerList do B[N].pointsScored=0 end;newMap()gamehelper()end;if ah=="ghSkip"then newMap()end;if ah=="ghRepeat"then tfm.exec.newGame(currentMap)end end;function eventColorPicked(ai,aj,ak)colors[G]=d("%x",ak)if F then for N,O in next,tfm.get.room.playerList do displayScore(N)end end;if t=="2teams"and not F then m(0,"",nil,5,30,202,278,0x000001,"0x"..colors[1],0.55,true)m(1,"",nil,592,30,202,278,0x000001,"0x"..colors[2],0.55,true)end;if t=="4teams"and not F then m(0,"",nil,-250,30,202,278,0x000001,"0x"..colors[1],0.55,true)m(1,"",nil,5,30,202,278,0x000001,"0x"..colors[2],0.55,true)m(2,"",nil,592,30,202,278,0x000001,"0x"..colors[3],0.55,true)m(3,"",nil,850,30,202,278,0x000001,"0x"..colors[4],0.55,true)end;if t=="8teams"and not F then m(0,"",nil,-250,30,202,139,0x000001,"0x"..colors[1],0.55,true)m(1,"",nil,5,30,202,139,0x000001,"0x"..colors[2],0.55,true)m(2,"",nil,592,30,202,139,0x000001,"0x"..colors[3],0.55,true)m(3,"",nil,850,30,202,139,0x000001,"0x"..colors[4],0.55,true)m(4,"",nil,-250,232,202,139,0x000001,"0x"..colors[5],0.55,true)m(5,"",nil,5,232,202,139,0x000001,"0x"..colors[6],0.55,true)m(6,"",nil,592,232,202,139,0x000001,"0x"..colors[7],0.55,true)m(7,"",nil,850,232,202,139,0x000001,"0x"..colors[8],0.55,true)end;TeamDisplay()SetNameColors()end;local al={["Aaa_bbb_ccc_ddd#2783"]=true,["Lipiking#4112"]=true}function eventChatCommand(w,am)local an=f(am," ")if an[1]=="tsc"then B[w].ui.scoreToggled=not B[w].ui.scoreToggled;displayScore(w)elseif w~=u and not contains(al,w,'index')then return elseif an[1]=="team"or an[1]=="t"then if an[3]and tonumber(an[2])and Teams[tonumber(an[2])]and tonumber(an[2])<=teams_count and tonumber(an[2])>=1 then local n=tonumber(an[2])for N=1,#Teams do for w=3,#an do if contains(Teams[N],an[w])then local ao=index(Teams[N],an[w])l(Teams[N],ao)end end end;for N=3,#an do for a3 in next,tfm.get.room.playerList do if an[N]==a3 then Teams[n][#Teams[n]+1]=an[N]x[an[N]]=true end end end;if n==8 then team_index=1 else team_index=n+1 end;TeamDisplay()elseif an[2]and tonumber(an[2])and Teams[tonumber(an[2])]and#Teams[tonumber(an[2])]>0 then local n=tonumber(an[2])for N=1,#Teams[n]do x[Teams[n][1]]=false;l(Teams[n],1)end;if n==8 then team_index=1 else team_index=n+1 end;TeamDisplay()end elseif an[1]=="q"or an[1]=="queue"then if an[2]then z[#z+1]=an[2]end elseif an[1]=="skip"or an[1]=="s"then newMap()elseif(an[1]=="r"or an[1]=="repeat")and currentMap then tfm.exec.newGame(currentMap)elseif an[1]=="pause"or an[1]=="p"then if not D then D=true;F=false;if an[2]then m(-77761247,"",nil,-12000,-12000,32000,32000,0x545557,0x000000,0.4,true)m(-77761248,"<p align='center'><font face='Verdana' color='#eff1f2'><font size='48'>The game is paused</font>\n<font size='16' face='Verdana' color='#eff1f2'>____________________________________________________________</font></p>",nil,100,100,0,0,0,0,1,true)m(-77761249,"<p align='center'><font face='Verdana' color='#eff1f2' size='24'>"..j(an,' ',2).."</font></p>",nil,100,190,600,200,0,0,1,true)else m(-77761247,"",nil,-12000,-12000,32000,32000,0x545557,0x000000,0.4,true)m(-77761248,"<p align='center'><font face='Verdana' color='#eff1f2'><font size='48'>The game is paused</font>\n<font size='16' face='Verdana' color='#eff1f2'>____________________________________________________________\n\n<font size='24'>Please stand by</font></font></p>",nil,100,100,0,0,0,0,1,true)end elseif D and not winnersTeam then for N=-77761247,-77761249,-1 do o(N)end;D=false;F=true else for N=-77761247,-77761249,-1 do o(N)end;D=false end elseif an[1]=="replay"then for N=1,tonumber(g(t,1,1))do points[N]=0 end;F=true;winnersTeam=nil;Q=0;for N,O in next,B do O.pointsScored=0 end;o(8)newMap()elseif an[1]=="ml"then if an[2]and an[2]=="remove"then if an[3]and g(an[3],1,1)=="@"then an[3]=g(an[3],2)end;if tonumber(an[3])then local N=index(C,tonumber(an[3]))if N then l(C,N)print(d('<r>-</r>\t <j>%s<j>',an[3]))end end elseif an[2]and an[2]=="add"then if an[3]and g(an[3],1,1)=="@"then an[3]=g(an[3],2)end;if tonumber(an[3])then C[#C+1]=an[3]print(d('<vp>+</vp>\t <j>%s<j>',an[3]))end elseif an[2]=="show"then print(j(C,","))end elseif an[1]=="new"then team_index=1;F=false;o(-912841)o(-478172)o(-478173)for N=0,8 do o(N)end;for N=-43,-48,-1 do o(N)end;for N=-1111,-1123,-1 do o(N)end;for N=-2222,-2224,-1 do o(N)end;winnersTeam=nil;Q=0;for N,O in next,B do O.pointsScored=0;O.jailTime=0 end;newGame()elseif an[1]=="color"or an[1]=="tc"then if an[2]and tonumber(an[2])and tonumber(an[2])>=1 and tonumber(an[2])<=tonumber(g(t,1,1))then G=tonumber(an[2])q(1,w,0x212F36,"Pick the team color")end elseif an[1]=="ban"and an[2]then for N,O in next,x do if N==an[2]then if x[N]then disappearTime_2=c()x[N]=false;y[N]=true;local R=tfm.get.room.playerList[N].x;local a6=tfm.get.room.playerList[N].y;drawParticles_strike(R,a6)tfm.exec.killPlayer(N)if an[3]then m(892881,"<p align='center'><font size='16' face='Consolas'><R>"..w.."</R> has banned <pt>"..N.."</pt>: "..j(an,' ',3).."</font></p>",nil,5,-30,790,0,0x000001,0x000001,0.3,true)else m(892881,"<p align='center'><font size='16' face='Consolas'><R>"..w.."</R> has banned <pt>"..N.."</pt></font></p>",nil,5,-30,790,0,0x000001,0x000001,0.3,true)end end end end elseif an[1]=="unban"and an[2]then for N,O in next,x do if N==an[2]then if not x[N]then disappearTime_2=c()x[N]=true;y[N]=false;if an[3]then m(892881,"<p align='center'><font size='16' face='Consolas'><R>"..w.."</R> has unbanned <pt>"..N.."</pt>: "..j(an,' ',3).."</font></p>",nil,5,-30,790,0,0x000001,0x000001,0.3,true)else m(892881,"<p align='center'><font size='16' face='Consolas'><R>"..w.."</R> has unbanned <pt>"..N.."</pt></font></p>",nil,5,-30,790,0,0x000001,0x000001,0.3,true)end end end end elseif an[1]=="strike"and an[2]then if an[2]=="all"then for N,O in next,x do if x[N]then local R=tfm.get.room.playerList[N].x;local a6=tfm.get.room.playerList[N].y;drawParticles_strike(R,a6)tfm.exec.killPlayer(N)end end else for N,O in next,x do if N==an[2]and x[N]then local R=tfm.get.room.playerList[N].x;local a6=tfm.get.room.playerList[N].y;drawParticles_strike(R,a6)tfm.exec.killPlayer(an[2])end end end elseif an[1]=="d"and tonumber(an[2])then s=tonumber(an[2])for N,O in next,tfm.get.room.playerList do displayScore(N)end elseif an[1]=="pset"and tonumber(an[2])and tonumber(an[3])then if tonumber(an[2])<=tonumber(g(t,1,1))and tonumber(an[2])>=1 then points[tonumber(an[2])]=tonumber(an[3])for N,O in next,tfm.get.room.playerList do displayScore(N)end end elseif an[1]=="autojoin"or an[1]=="aj"then H=not H;if H then k(tfm.get.room.playerList,eventNewPlayer)end elseif an[1]=="antisouris"or an[1]=="as"then I=not I elseif an[1]=="turbo"or an[1]=="tm"then J=not J elseif an[1]=="yeet"and an[2]then if x[an[2]]then tfm.exec.movePlayer(an[2],tfm.get.room.playerList[an[2]].x,tfm.get.room.playerList[an[2]].y,false,0,2000,true)end elseif an[1]=="rainbow"and an[2]and an[3]then local ap=#A;local aq=an[3]if an[2]=="off"then local N=index(A,aq)A[N]=nil end;if an[2]=="on"then if not contains(A,aq)then A[ap+1]=aq end end elseif an[1]=="size"and an[2]then local a7=an[3]and tonumber(an[3])or 1;if an[2]=='all'then for n in next,tfm.get.room.playerList do tfm.exec.changePlayerSize(n,a7)end else if contains(x,an[2],'index')then tfm.exec.changePlayerSize(an[2],a7)end end elseif an[1]=="freeze"and an[2]then if an[2]=='all'then for n in next,tfm.get.room.playerList do tfm.exec.freezePlayer(n,true)end else if contains(x,an[2],'index')then tfm.exec.freezePlayer(an[2],true)end end elseif an[1]=="unfreeze"and an[2]then if an[2]=='all'then for n in next,tfm.get.room.playerList do tfm.exec.freezePlayer(n,false)end else if contains(x,an[2],'index')then tfm.exec.freezePlayer(n,false)end end elseif an[1]=="cheese"and an[2]then local ar;if an[2]=='all'then for n,O in next,tfm.get.room.playerList do if O.hasCheese then ar=tfm.exec.removeCheese else ar=tfm.exec.giveCheese end;ar(n)end else if not contains(x,an[2],'index')then return end;if tfm.get.room.playerList[an[2]].hasCheese then ar=tfm.exec.removeCheese else ar=tfm.exec.giveCheese end;ar(an[2])end elseif an[1]=="shaman"then local as=not an[2]and w or contains(x,an[2],'index')and an[2]tfm.exec.setShaman(as,not tfm.get.room.playerList[as].isShaman)elseif an[1]=="tfm"then local as=not an[2]and w or contains(x,an[2],'index')and an[2]or w;tfm.exec.giveTransformations(as,not B[as].attr.hasTfm)B[as].attr.hasTfm=not B[as].attr.hasTfm elseif an[1]=="link"and an[2]then if not an[3]then return end;local at=contains(x,an[2],'index')and an[2]or nil;local au=contains(x,an[3],'index')and an[3]or nil;if not at or not au then return end;tfm.exec.linkMice(at,au,true)elseif an[1]=="unlink"and an[2]then if not an[3]then return end;local at=contains(x,an[2],'index')and an[2]or nil;local au=contains(x,an[3],'index')and an[3]or nil;if not at or not au then return end;tfm.exec.linkMice(at,au,false)elseif an[1]=="conj"then local as=not an[2]and w or contains(x,an[2],'index')and an[2]h(as,not B[as].attr.hasConj)B[as].attr.hasConj=not B[as].attr.hasConj elseif an[1]=="jail"and an[2]and(tonumber(an[3])and tonumber(an[3])>0)then local as=contains(x,an[2],'index')and an[2]if not as then return end;disappearTime_2=c()B[as].attr.jailTime=tonumber(an[3])-1;createJail()tfm.exec.movePlayer(as,-230,365)if an[4]then m(892881,"<p align='center'><font size='16' face='Consolas'><R>"..w.."</R> has jailed <pt>"..an[2].."</pt> for <R>"..an[3].."</R> rounds: "..j(an,' ',4).."</font></p>",nil,5,-30,790,0,0x000001,0x000001,0.3,true)else m(892881,"<p align='center'><font size='16' face='Consolas'><R>"..w.."</R> has jailed <pt>"..an[2].."</pt> for <R>"..an[3].."</R> rounds</font></p>",nil,5,-30,790,0,0x000001,0x000001,0.3,true)end elseif an[1]=="6"and an[2]and an[3]then local as=contains(x,an[2],'index')and an[2]or'all'if an[3]=='off'then if as~='all'then local av=B[as]if#av.images>0 then tfm.exec.removeImage(av.images[1])end;av.images={}av.sixLoop=false else for Z,O in next,B do if#O.images>0 then tfm.exec.removeImage(O.images[1])end;O.images={}O.sixLoop=false end end elseif an[3]=='on'then if as~='all'then local av=B[as]if#av.images>0 then tfm.exec.removeImage(av.images[1])end;av.images={}av.images[1]=tfm.exec.addImage("1731a5e4831.png","$"..as,-15,-60,nil)av.sixLoop=true else for Z,O in next,B do if#O.images>0 then tfm.exec.removeImage(O.images[1])end;O.images={}O.images[1]=tfm.exec.addImage("1731a5e4831.png","$"..Z,-15,-60,nil)O.sixLoop=true end end end end end;m(-420,"<a href='event:2teams'><p align='center'><font size='16' color='#E6E6E6'>2 Teams</font></p></a>",u,340,240,100,0,0x000001,0x000001,0.55,true)m(-421,"<a href='event:4teams'><p align='center'><font size='16' color='#E6E6E6'>4 Teams</font></p></a>",u,340,200,100,0,0x000001,0x000001,0.55,true)m(-422,"<a href='event:8teams'><p align='center'><font size='16' color='#E6E6E6'>8 Teams</font></p></a>",u,340,160,100,0,0x000001,0x000001,0.55,true)